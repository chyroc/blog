<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>gopher-reading-list 阅读笔记 | Chyroc的博客</title><link rel=stylesheet href=/css/style.css><link href=//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css rel=stylesheet></head><body><nav><ul class=menu><li><a href=/>主页</a></li><li><a href=/blogroll/>友链</a></li><li><a href=/about/>关于</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>gopher-reading-list 阅读笔记</span></h1><h2 class=date>2018/03/06</h2></div><main><h2 id=github-cdarwin-go-koans-koans-for-go-1-阅读有感><a href=https://github.com/cdarwin/go-koans>GitHub - cdarwin/go-koans: koans for go</a>阅读有感</h2><pre><code class=language-go>package go_koans

import (
    &quot;testing&quot;
    &quot;fmt&quot;
)

func TestNote(t *testing.T) {
    // basic
    {
        assert(5^2 == 7)
        // 乘方是：math.Pow()，这个是按位与
    }

    // string
    {
        assert(&quot;abc&quot;[0] == uint8('a'))
        assert(fmt.Sprintf(&quot;hello %q&quot;, &quot;world&quot;) == &quot;hello \&quot;world\&quot;&quot;)
        assert(fmt.Sprintf(&quot;your balance: %d and %0.2f&quot;, 3, 4.5589) == &quot;your balance: 3 and 4.56&quot;)
        // %q 会加上双引号
        // %0.2f 会四舍五入
    }

    // array alice
    {
        assert(cap([4]string{&quot;apple&quot;, &quot;orange&quot;, &quot;mango&quot;}) == 4) // it can hold no more
        assert(cap([]string{&quot;apple&quot;, &quot;orange&quot;, &quot;mango&quot;}) == 3)  // it can hold no more
        // array slice在计算cap的不同

        f := []string{&quot;apple&quot;, &quot;orange&quot;, &quot;mango&quot;}
        f[0] = &quot;change&quot;
        assert(f[0] == &quot;change&quot;)
        // slice会引用计算

        p := []string{&quot;baby&quot;, &quot;baby&quot;, &quot;lemon&quot;}
        assert(cap(p) == 3)
        p = append(p, &quot;baby!&quot;)
        assert(cap(p) == 6)
        // append 会扩展一倍
    }

    // ControlFlow
    {
        var str string
        switch {
        case false:
            str = &quot;first&quot;
        case true:
            str = &quot;second&quot;
        }
        assert(str == &quot;second&quot;)
        // switch 在没有选项的时候，默认是true
    }

    // struct
    {
        var bob struct {
            name string
            age  int
        }
        bob.name = &quot;bob&quot;
        bob.age = 30

        type person struct {
            name string
            age  int
        }
        var john = person{
            &quot;bob&quot;,
            30,
        }
        assert(bob == john) // assuredly, bob is certainly not john.. yet
        // struct只要结构和数据一样，就相同，不需要使用同一个type
    }

    // Allocation
    {
        slice := make([]int, 3)
        assert(len(slice) == 3) // make() creates slices of a given length
        // make创建的array的长度是3
    }
}
</code></pre><h2 id=frequently-asked-questions-faq-2-阅读有感><a href=https://golang.org/doc/faq>Frequently Asked Questions (FAQ)</a>阅读有感</h2><p>使用 default，完成非阻塞的 channel：</p><pre><code class=language-go>   select {
	case msg := &lt;-messages:
		fmt.Println(&quot;received message&quot;, msg)
	case sig := &lt;-signals:
		fmt.Println(&quot;received signal&quot;, sig)
	default:
		fmt.Println(&quot;no activity&quot;)
	}
</code></pre><p>通过 range 循环 channel</p><pre><code class=language-go>func main() {
    queue := make(chan string, 2)
    queue &lt;- &quot;one&quot;
    queue &lt;- &quot;two&quot;
    close(queue)

    for elem := range queue {
        fmt.Println(elem)
    }
}
</code></pre><h2 id=6-tips-for-using-strings-in-go-calhoun-io-3-阅读有感><a href=https://www.calhoun.io/6-tips-for-using-strings-in-go/>6 Tips for Using Strings in Go - Calhoun.io</a>阅读有感</h2><p>使用<code>bytes/Buffer</code>或者<code>strings.Join</code>拼接字符串比<code>s+=&quot;&quot;</code>快</p><pre><code class=language-go>func main() {
    var b bytes.Buffer
    for i := 0; i &lt; 1000; i++ {
        b.WriteString(randString())
    }
    fmt.Println(b.String())
}
</code></pre><p>int 不能简单的使用<code>string(i)</code>转成 string</p><pre><code class=language-go>strconv.Itoa(i)
</code></pre><p>创建随机字符串</p><pre><code class=language-go>package main

import (
    &quot;fmt&quot;
    &quot;math/rand&quot;
    &quot;time&quot;
)

func main() {
    fmt.Println(RandString(10))
}

var source = rand.NewSource(time.Now().UnixNano())

const charset = &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;

func RandString(length int) string {
    b := make([]byte, length)
    for i := range b {
        b[i] = charset[source.Int63()%int64(len(charset))]
    }
    return string(b)
}
</code></pre><h2 id=参考>参考</h2><ul><li><a href=https://github.com/enocom/gopher-reading-list>https://github.com/enocom/gopher-reading-list</a></li></ul></main><footer><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script src=../../js/jquery-3.3.1.min.js></script><script src=../../js/code.js></script><script src=../../css/highlight.css></script><script src=../../js/instantclick.min.js data-no-instant></script><script data-no-instant>InstantClick.init();</script><script>hljs.configure({languages:[]});hljs.initHighlightingOnLoad();</script><hr>&copy; <a href=https://chyroc.cn>chyroc</a> <a href=https://themes.gohugo.io/hugo-xmin/>Theme By hyde</a> 2021
<span id=reading-statistics><span></footer><div id=git-comments></div><link rel=stylesheet href=https://imsun.github.io/gitment/style/default.css><script src=https://imsun.github.io/gitment/dist/gitment.browser.js></script><script>var gitment=new Gitment({id:'read-gopher-reading-list',title:'gopher-reading-list 阅读笔记',owner:'Chyroc',repo:'chyroc.github.io',oauth:{client_id:'36628d87f0ace3c0f34c',client_secret:'814e29f878a31ddf2a0f8f010c2bc3615750a998',}})
gitment.render('git-comments')</script></body></html>