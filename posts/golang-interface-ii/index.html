<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>golang çš„ interface(ç¬¬äºŒç¯‡) - æ¥å£çš„ä½œç”¨ | Chyrocçš„åšå®¢</title><link rel=stylesheet href=/css/style.css><link href=//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css rel=stylesheet></head><body><nav><ul class=menu><li><a href=/>ä¸»é¡µ</a></li><li><a href=/blogroll/>å‹é“¾</a></li><li><a href=/about/>å…³äº</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>golang çš„ interface(ç¬¬äºŒç¯‡) - æ¥å£çš„ä½œç”¨</span></h1><h2 class=date>2017/08/04</h2></div><main><p>åœ¨<a href=../golang-interface-i/>golang çš„ interface(ç¬¬ä¸€ç¯‡) - æ¥å£çš„å®šä¹‰ä¸å®ç°</a>é‡Œé¢ï¼Œæˆ‘ç¨å¾®è®²äº†ä¸€ä¸‹æˆ‘ç†è§£çš„ä»€ä¹ˆæ˜¯æ¥å£ï¼Œæ€ä¹ˆå®šä¹‰æ¥å£ï¼Œæ€ä¹ˆå®ç°æ¥å£ï¼Œæœ¬æ–‡å°†ä¼šè®²ä¸€è®²æ¥å£çš„ä½œç”¨ã€‚</p><h2 id=æ¥å£ä½œä¸ºå‚æ•°ä»£è¡¨ä»€ä¹ˆ>æ¥å£ä½œä¸ºå‚æ•°ä»£è¡¨ä»€ä¹ˆ</h2><p>å¦‚æœä¸€ä¸ªå‡½æ•°çš„å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨ï¼šåœ¨ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ è¿›æ¥ä¸€ä¸ªå®ç°äº†è¿™ä¸ªæ¥å£çš„ç±»å‹ã€‚</p><p>æ¯”å¦‚ä¸€ä¸ªæ¥å£çš„å‚æ•°ç±»å‹æ˜¯ã€Œè·‘ã€(runType)ï¼Œä¸ç®¡ä»–æ˜¯è·‘åˆ°å“ªé‡Œï¼Œè·‘å¤šä¹…ï¼Œæ˜¯è¦ä¸€ä¸ªå¯¹è±¡å¯ä»¥è·‘ï¼Œé‚£è¿™ä¸ªå¯¹è±¡å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚</p><h2 id=æ¥å£ä½œä¸ºå‚æ•°å¯ä»¥åšä»€ä¹ˆ>æ¥å£ä½œä¸ºå‚æ•°å¯ä»¥åšä»€ä¹ˆ</h2><p>å°†å¯¹è±¡ä¸€èˆ¬è¡Œä¸ºæŠ½è±¡å‡ºæ¥ï¼Œä½œä¸ºæ¥å£ï¼Œä¾‹å¦‚ï¼š</p><p><code>io.Writer</code></p><pre><code class=language-go>type Writer interface {
	Write(p []byte) (n int, err error)
}
</code></pre><p>ä»£è¡¨äº†æ‰€æœ‰å¯ä»¥å†™å…¥å­—èŠ‚çš„æŠ½è±¡ï¼Œæ¯”å¦‚ï¼šæ–‡ä»¶ï¼Œç¼“å†²ï¼Œhttpï¼Œhasherã€‚</p><p>åªè¦ä¸€ä¸ªç±»å‹å®ç°äº†<code>io.Writer</code>æ¥å£ï¼Œé‚£ä»–å°±å¯ä»¥å»å†™ã€‚ï¼ˆå…·ä½“æ€ä¹ˆå†™åœ¨è¿™ä¸ªæ¥å£å®ç°çš„æ–¹æ³•é‡Œè¯¦ç»†å®šä¹‰äº†ã€‚ï¼‰</p><p>æˆ‘è§‰å¾—è‡ªå·±å¯¹è¿™ä¸ªè¿˜ä¸ç†è§£ï¼Œæ„Ÿè§‰è‡ªå·±è¯´äº†å¾ˆå¤šåºŸè¯ã€‚</p><p>ç°åœ¨æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¾“å…¥ä¸€äº›å­—èŠ‚å’Œä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„å†™æ–¹æ³•ï¼Œå«åš<code>Print</code>ã€‚</p><p>æ‰€ä»¥ï¼Œå±å¹•å¯ä»¥å®šä¹‰è‡ªå·±çš„å±•ç°å­—ç¬¦çš„æ–¹å¼ï¼Œæ—¥å¿—å¯ä»¥å®šä¹‰è‡ªå·±å­˜å‚¨æ—¥å¿—çš„æ ¼å¼ï¼Œhttp server å¯ä»¥å®šä¹‰ç½‘ç»œè¿”å›çš„æ•°æ®çš„æ ¼å¼ï¼Œç­‰ç­‰ç­‰ç­‰ï¼Œåªè¦è¿™ä¸ªç‹¬ç‰¹çš„å¯¹è±¡å®šä¹‰äº†è‡ªå·±çš„å†™æ–¹æ³•ï¼Œé‚£ä¹ˆä»–å°±å¯ä»¥è¯è¯è¯åˆ‡å…‹é—¹ã€‚ã€‚</p><h2 id=sort-åŒ…ç¤ºä¾‹è¯´æ˜>sort åŒ…ç¤ºä¾‹è¯´æ˜</h2><p>åœ¨ golang å†…ç½®çš„ sort åŒ…é‡Œé¢ï¼Œå®šä¹‰äº†ä¸€ä¸ª<code>Interface</code>ï¼š</p><pre><code class=language-go>type Interface interface {
	Len() int
	Less(i, j int) bool
	Swap(i, j int)
}
</code></pre><p>å¥½å¥‡æ€ªï¼Œç«Ÿç„¶åå­—å°±æ˜¯å«åš<code>Interface</code>ã€‚</p><p>ç„¶åè¿˜å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶æ’åº</p><pre><code class=language-go>func Sort(data Interface)
</code></pre><p>æ‰€ä»¥ï¼Œå¯¹äºä»»ä½•æ•°æ®ç±»å‹ï¼Œä½ å®šä¹‰çš„ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿ã€‚ä½ æƒ³è¦å¯¹ä»–æ’åºï¼Ÿ</p><p>æ²¡é—®é¢˜ï¼Œåªè¦ä½ å»ä¸ºè¿™ä¸ªæ•°æ®ç±»å‹å®ç°<code>Interface</code>çš„æ¥å£</p><h3 id=å­—ç¬¦ä¸²æ•°ç»„-sort-ç¤ºä¾‹>å­—ç¬¦ä¸²æ•°ç»„ sort ç¤ºä¾‹</h3><pre><code class=language-go>type personName []string

func (pn personName) Len() int {
	return len(pn)
}

func (pn personName) Less(i, j int) bool {
	return pn[i] &lt; pn[j]
}

func (pn personName) Swap(i, j int) {
	pn[i], pn[j] = pn[j], pn[i]
}
</code></pre><p>ä¸Šé¢å…ˆå®šä¹‰äº†ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„<code>personName</code>ï¼Œç„¶åå®ç°äº†<code>sort</code>åŒ…é‡Œé¢çš„<code>Interface</code>æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ç”¨<code>sort.Sort</code>å¯¹ä»–è¿›è¡Œæ’åºäº†</p><pre><code class=language-go>func main() {
	pn :=personName{&quot;chen&quot;,&quot;zhao&quot;,&quot;qian&quot;,&quot;sun&quot;,&quot;li&quot;}
	sort.Sort(pn)

	fmt.Println(pn)
}
</code></pre><h3 id=è‡ªå®šä¹‰-struct-sort-ç¤ºä¾‹>è‡ªå®šä¹‰ struct sort ç¤ºä¾‹</h3><pre><code class=language-go>type Person struct {
	Name string
	Age  int
}

type Human []Person

func (h Human) Len() int {
	return len(h)
}

func (h Human) Less(i, j int) bool {
	p1 := h[i]
	p2 := h[j]
	if p1.Age &lt; p2.Age {
		return true
	} else if p1.Age == p2.Age {
		return p1.Name &lt;= p2.Name
	}
	return false
}

func (h Human) Swap(i, j int) {
	h[i], h[j] = h[j], h[i]
}
</code></pre><p>å—¯ï¼Œä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªäººç±»çš„å¯¹è±¡ï¼Œç„¶åä»–ä»¬æ’åºçš„æ—¶å€™å…ˆæ¯”è¾ƒå¹´é¾„ï¼Œå†æ¯”è¾ƒåå­—ã€‚</p><pre><code class=language-go>func main() {
	h := Human{
		Person{Name: &quot;chen&quot;, Age: 24},
		Person{Name: &quot;zhao&quot;, Age: 24},
		Person{Name: &quot;qian&quot;, Age: 26},
	}
	sort.Sort(h)

	fmt.Println(h)
}
</code></pre><pre><code class=language-plain>[{chen 24} {zhao 24} {qian 26}]
</code></pre><h3 id=æ€ä¹ˆå®ç°é€†å‘æ’åº>æ€ä¹ˆå®ç°é€†å‘æ’åº</h3><h4 id=sort-é€†å‘æ’åº>sort é€†å‘æ’åº</h4><p>è¿™ä¸ªå‡½æ•°æ”¯æŒè¾“å…¥ä¸€å¹¶è¿”å›ä¸€ä¸ª``æ¥å£ï¼Œä½†æ˜¯è¿”å›çš„é‚£ä¸ªçš„æ¥å£çš„æ–¹æ³•è¢«ä¿®æ”¹äº†</p><pre><code class=language-go>func Reverse(data Interface) Interface {
	return &amp;reverse{data}
}
</code></pre><pre><code class=language-go>type reverse struct {
	Interface
}
</code></pre><p>åœ¨ sort é‡Œé¢ï¼Œå®šä¹‰äº†è¿™æ ·ä¸€ä¸ªæœªå¯¼å‡ºçš„æ¥å£<code>reverse</code>ï¼Œä»–ä½¿ç”¨äº†ä¸€ä¸ª <strong>é‡è¦çš„æ¦‚å¿µï¼šç»„åˆ</strong> ï¼Œä»–æœ¬èº«å¹¶æ²¡æœ‰å£°æ˜ä»»ä½•æ–¹æ³•ï¼Œä½†æ˜¯å‘¢ï¼Œä»–å†…åµŒäº†ä¸€ä¸ª<code>Interface</code>æ¥å£ï¼Œæ‰€ä»¥ä»–å°±è‡ªåŠ¨å£°æ˜äº†<code>Interface</code>æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼ï¼</p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ åœ¨ä½ çš„ä»£ç é‡Œé¢å¯¹ä¸€ä¸ªæ•°æ®ç±»å‹å®ç°äº†<code>Interface</code>æ¥å£ï¼Œé‚£ä¹ˆå®é™…ä¸Šï¼Œä½ ä¹Ÿéšå¼åœ°å®ç°äº†æœªå¯¼å‡ºçš„æ¥å£<code>reverse</code>æ¥å£ã€‚</p><p>æ›´ä¸ºç¥å¥‡çš„æ˜¯ï¼šä»–åœ¨ä½ å®ç°äº†è¿™äº›æ¥å£ä¹‹åï¼Œæ”¹å˜äº†ä½ æ‰€å®šä¹‰çš„æ„ä¹‰ã€‚</p><p>çœ‹ä¸€çœ‹ sort é‡Œçš„å®ç°ï¼š</p><pre><code class=language-go>func (r reverse) Less(i, j int) bool {
	return r.Interface.Less(j, i)
}
</code></pre><p>å“ˆå“ˆå“ˆğŸ˜ï¼ŒLess åè¿‡æ¥äº†</p><p>ä½¿ç”¨ï¼š</p><pre><code class=language-go>func main() {
	h := Human{
		Person{Name: &quot;chen&quot;, Age: 24},
		Person{Name: &quot;zhao&quot;, Age: 24},
		Person{Name: &quot;qian&quot;, Age: 26},
	}
	//sort.Sort(h)
	sort.Sort(sort.Reverse(h))
	fmt.Println(h)
}
</code></pre></main><footer><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script src=../../js/jquery-3.3.1.min.js></script><script src=../../js/code.js></script><script src=../../css/highlight.css></script><script src=../../js/instantclick.min.js data-no-instant></script><script data-no-instant>InstantClick.init();</script><script>hljs.configure({languages:[]});hljs.initHighlightingOnLoad();</script><hr>&copy; <a href=https://chyroc.cn>chyroc</a> <a href=https://themes.gohugo.io/hugo-xmin/>Theme By hyde</a> 2021
<span id=reading-statistics><span></footer><div id=git-comments></div><link rel=stylesheet href=https://imsun.github.io/gitment/style/default.css><script src=https://imsun.github.io/gitment/dist/gitment.browser.js></script><script>var gitment=new Gitment({id:'golang-interface-ii',title:'golang çš„ interface(ç¬¬äºŒç¯‡) - æ¥å£çš„ä½œç”¨',owner:'Chyroc',repo:'chyroc.github.io',oauth:{client_id:'36628d87f0ace3c0f34c',client_secret:'814e29f878a31ddf2a0f8f010c2bc3615750a998',}})
gitment.render('git-comments')</script></body></html>