
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>golangçš„interface(ç¬¬äºŒç¯‡) - æ¥å£çš„ä½œç”¨ - Chyrocçš„åšå®¢</title>
<meta property="og:title" content="blog.chyroc.cn" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Chyrocçš„åšå®¢" />
<meta property="og:description" content="Chyrocçš„åšå®¢" />
<link rel="canonical" href="blog.chyroc.cn" />
<meta property="og:url" content="blog.chyroc.cn" />
<meta property="og:site_name" content="blog.chyroc.cn" />
<script type="application/ld+json">
{"name":"blog.chyroc.cn","description":"Chyrocçš„åšå®¢","author":"Chyroc","@type":"WebSite","url":"blog.chyroc.cn","image":null,"publisher":null,"headline":"blog.chyroc.cn","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>


<link href="http://blog.chyroc.cn/assets/css/style.css?v=305ca492b034089b2a2287dae4e9fa13ac15b666" rel="stylesheet">
</head>
<body>
<div class="container-lg px-3 my-5 markdown-body">

<p>åœ¨<a href="https://github.com/Chyroc/blog/issues/16">golangçš„interface(ç¬¬ä¸€ç¯‡) - æ¥å£çš„å®šä¹‰ä¸å®ç°</a>é‡Œé¢ï¼Œæˆ‘ç¨å¾®è®²äº†ä¸€ä¸‹æˆ‘ç†è§£çš„ä»€ä¹ˆæ˜¯æ¥å£ï¼Œæ€ä¹ˆå®šä¹‰æ¥å£ï¼Œæ€ä¹ˆå®ç°æ¥å£ï¼Œæœ¬æ–‡å°†ä¼šè®²ä¸€è®²æ¥å£çš„ä½œç”¨ã€‚</p>
<h2>
<a id="user-content-æ¥å£ä½œä¸ºå‚æ•°ä»£è¡¨ä»€ä¹ˆ" class="anchor" href="#%E6%8E%A5%E5%8F%A3%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0%E4%BB%A3%E8%A1%A8%E4%BB%80%E4%B9%88" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ¥å£ä½œä¸ºå‚æ•°ä»£è¡¨ä»€ä¹ˆ</h2>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°çš„å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨ï¼šåœ¨ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ è¿›æ¥ä¸€ä¸ªå®ç°äº†è¿™ä¸ªæ¥å£çš„ç±»å‹ã€‚</p>
<p>æ¯”å¦‚ä¸€ä¸ªæ¥å£çš„å‚æ•°ç±»å‹æ˜¯ã€Œè·‘ã€(runType)ï¼Œä¸ç®¡ä»–æ˜¯è·‘åˆ°å“ªé‡Œï¼Œè·‘å¤šä¹…ï¼Œæ˜¯è¦ä¸€ä¸ªå¯¹è±¡å¯ä»¥è·‘ï¼Œé‚£è¿™ä¸ªå¯¹è±¡å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚</p>
<h2>
<a id="user-content-æ¥å£ä½œä¸ºå‚æ•°å¯ä»¥åšä»€ä¹ˆ" class="anchor" href="#%E6%8E%A5%E5%8F%A3%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0%E5%8F%AF%E4%BB%A5%E5%81%9A%E4%BB%80%E4%B9%88" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ¥å£ä½œä¸ºå‚æ•°å¯ä»¥åšä»€ä¹ˆ</h2>
<p>å°†å¯¹è±¡ä¸€èˆ¬è¡Œä¸ºæŠ½è±¡å‡ºæ¥ï¼Œä½œä¸ºæ¥å£ï¼Œä¾‹å¦‚ï¼š</p>
<p><code>io.Writer</code></p>
<div class="highlight highlight-source-go"><pre><span class="pl-k">type</span> <span class="pl-v">Writer</span> <span class="pl-k">interface</span> {
	<span class="pl-c1">Write</span>(p []<span class="pl-k">byte</span>) (n <span class="pl-k">int</span>, err <span class="pl-k">error</span>)
}</pre></div>
<p>ä»£è¡¨äº†æ‰€æœ‰å¯ä»¥å†™å…¥å­—èŠ‚çš„æŠ½è±¡ï¼Œæ¯”å¦‚ï¼šæ–‡ä»¶ï¼Œç¼“å†²ï¼Œhttpï¼Œhasherã€‚</p>
<p>åªè¦ä¸€ä¸ªç±»å‹å®ç°äº†<code>io.Writer</code>æ¥å£ï¼Œé‚£ä»–å°±å¯ä»¥å»å†™ã€‚ï¼ˆå…·ä½“æ€ä¹ˆå†™åœ¨è¿™ä¸ªæ¥å£å®ç°çš„æ–¹æ³•é‡Œè¯¦ç»†å®šä¹‰äº†ã€‚ï¼‰</p>
<p>æˆ‘è§‰å¾—è‡ªå·±å¯¹è¿™ä¸ªè¿˜ä¸ç†è§£ï¼Œæ„Ÿè§‰è‡ªå·±è¯´äº†å¾ˆå¤šåºŸè¯ã€‚</p>
<p>ç°åœ¨æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¾“å…¥ä¸€äº›å­—èŠ‚å’Œä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„å†™æ–¹æ³•ï¼Œå«åš<code>Print</code>ã€‚</p>
<p>æ‰€ä»¥ï¼Œå±å¹•å¯ä»¥å®šä¹‰è‡ªå·±çš„å±•ç°å­—ç¬¦çš„æ–¹å¼ï¼Œæ—¥å¿—å¯ä»¥å®šä¹‰è‡ªå·±å­˜å‚¨æ—¥å¿—çš„æ ¼å¼ï¼Œhttp serverå¯ä»¥å®šä¹‰ç½‘ç»œè¿”å›çš„æ•°æ®çš„æ ¼å¼ï¼Œç­‰ç­‰ç­‰ç­‰ï¼Œåªè¦è¿™ä¸ªç‹¬ç‰¹çš„å¯¹è±¡å®šä¹‰äº†è‡ªå·±çš„å†™æ–¹æ³•ï¼Œé‚£ä¹ˆä»–å°±å¯ä»¥è¯è¯è¯åˆ‡å…‹é—¹ã€‚ã€‚</p>
<h2>
<a id="user-content-sortåŒ…ç¤ºä¾‹è¯´æ˜" class="anchor" href="#sort%E5%8C%85%E7%A4%BA%E4%BE%8B%E8%AF%B4%E6%98%8E" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>sortåŒ…ç¤ºä¾‹è¯´æ˜</h2>
<p>åœ¨golangå†…ç½®çš„sortåŒ…é‡Œé¢ï¼Œå®šä¹‰äº†ä¸€ä¸ª<code>Interface</code>ï¼š</p>
<div class="highlight highlight-source-go"><pre><span class="pl-k">type</span> <span class="pl-v">Interface</span> <span class="pl-k">interface</span> {
	<span class="pl-c1">Len</span>() <span class="pl-k">int</span>
	<span class="pl-c1">Less</span>(i, j <span class="pl-k">int</span>) <span class="pl-k">bool</span>
	<span class="pl-c1">Swap</span>(i, j <span class="pl-k">int</span>)
}</pre></div>
<p>å¥½å¥‡æ€ªï¼Œç«Ÿç„¶åå­—å°±æ˜¯å«åš<code>Interface</code>ã€‚</p>
<p>ç„¶åè¿˜å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶æ’åº</p>
<div class="highlight highlight-source-go"><pre><span class="pl-k">func</span> <span class="pl-en">Sort</span>(<span class="pl-v">data</span> <span class="pl-v">Interface</span>)</pre></div>
<p>æ‰€ä»¥ï¼Œå¯¹äºä»»ä½•æ•°æ®ç±»å‹ï¼Œä½ å®šä¹‰çš„ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿ã€‚ä½ æƒ³è¦å¯¹ä»–æ’åºï¼Ÿ</p>
<p>æ²¡é—®é¢˜ï¼Œåªè¦ä½ å»ä¸ºè¿™ä¸ªæ•°æ®ç±»å‹å®ç°<code>Interface</code>çš„æ¥å£</p>
<h3>
<a id="user-content-å­—ç¬¦ä¸²æ•°ç»„-sortç¤ºä¾‹" class="anchor" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%95%B0%E7%BB%84-sort%E7%A4%BA%E4%BE%8B" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>å­—ç¬¦ä¸²æ•°ç»„ sortç¤ºä¾‹</h3>
<div class="highlight highlight-source-go"><pre><span class="pl-k">type</span> personName []<span class="pl-k">string</span>

<span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">pn</span> <span class="pl-v">personName</span>) <span class="pl-en">Len</span></span>() <span class="pl-v">int</span> {
	<span class="pl-k">return</span> <span class="pl-c1">len</span>(pn)
}

<span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">pn</span> <span class="pl-v">personName</span>) <span class="pl-en">Less</span></span>(<span class="pl-v">i</span>, <span class="pl-v">j</span> <span class="pl-v">int</span>) <span class="pl-v">bool</span> {
	<span class="pl-k">return</span> pn[i] &lt; pn[j]
}

<span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">pn</span> <span class="pl-v">personName</span>) <span class="pl-en">Swap</span></span>(<span class="pl-v">i</span>, <span class="pl-v">j</span> <span class="pl-v">int</span>) {
	pn[i], pn[j] = pn[j], pn[i]
}</pre></div>
<p>ä¸Šé¢å…ˆå®šä¹‰äº†ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„<code>personName</code>ï¼Œç„¶åå®ç°äº†<code>sort</code>åŒ…é‡Œé¢çš„<code>Interface</code>æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ç”¨<code>sort.Sort</code>å¯¹ä»–è¿›è¡Œæ’åºäº†</p>
<div class="highlight highlight-source-go"><pre><span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-smi">pn</span> <span class="pl-k">:=</span>personName{<span class="pl-s"><span class="pl-pds">"</span>chen<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>zhao<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>qian<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>sun<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>li<span class="pl-pds">"</span></span>}
	sort.<span class="pl-c1">Sort</span>(pn)

	fmt.<span class="pl-c1">Println</span>(pn)
}</pre></div>
<h3>
<a id="user-content-è‡ªå®šä¹‰struct-sortç¤ºä¾‹" class="anchor" href="#%E8%87%AA%E5%AE%9A%E4%B9%89struct-sort%E7%A4%BA%E4%BE%8B" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>è‡ªå®šä¹‰struct sortç¤ºä¾‹</h3>
<div class="highlight highlight-source-go"><pre><span class="pl-k">type</span> <span class="pl-v">Person</span> <span class="pl-k">struct</span> {
	<span class="pl-v">Name</span> <span class="pl-k">string</span>
	<span class="pl-v">Age</span>  <span class="pl-k">int</span>
}

<span class="pl-k">type</span> <span class="pl-v">Human</span> []<span class="pl-v">Person</span>

<span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">h</span> <span class="pl-v">Human</span>) <span class="pl-en">Len</span></span>() <span class="pl-v">int</span> {
	<span class="pl-k">return</span> <span class="pl-c1">len</span>(h)
}

<span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">h</span> <span class="pl-v">Human</span>) <span class="pl-en">Less</span></span>(<span class="pl-v">i</span>, <span class="pl-v">j</span> <span class="pl-v">int</span>) <span class="pl-v">bool</span> {
	<span class="pl-smi">p1</span> <span class="pl-k">:=</span> h[i]
	<span class="pl-smi">p2</span> <span class="pl-k">:=</span> h[j]
	<span class="pl-k">if</span> p1.<span class="pl-smi">Age</span> &lt; p2.<span class="pl-smi">Age</span> {
		<span class="pl-k">return</span> <span class="pl-c1">true</span>
	} <span class="pl-k">else</span> <span class="pl-k">if</span> p1.<span class="pl-smi">Age</span> == p2.<span class="pl-smi">Age</span> {
		<span class="pl-k">return</span> p1.<span class="pl-smi">Name</span> &lt;= p2.<span class="pl-smi">Name</span>
	}
	<span class="pl-k">return</span> <span class="pl-c1">false</span>
}

<span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">h</span> <span class="pl-v">Human</span>) <span class="pl-en">Swap</span></span>(<span class="pl-v">i</span>, <span class="pl-v">j</span> <span class="pl-v">int</span>) {
	h[i], h[j] = h[j], h[i]
}</pre></div>
<p>å—¯ï¼Œä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªäººç±»çš„å¯¹è±¡ï¼Œç„¶åä»–ä»¬æ’åºçš„æ—¶å€™å…ˆæ¯”è¾ƒå¹´é¾„ï¼Œå†æ¯”è¾ƒåå­—ã€‚</p>
<div class="highlight highlight-source-go"><pre><span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-smi">h</span> <span class="pl-k">:=</span> Human{
		Person{Name: <span class="pl-s"><span class="pl-pds">"</span>chen<span class="pl-pds">"</span></span>, Age: <span class="pl-c1">24</span>},
		Person{Name: <span class="pl-s"><span class="pl-pds">"</span>zhao<span class="pl-pds">"</span></span>, Age: <span class="pl-c1">24</span>},
		Person{Name: <span class="pl-s"><span class="pl-pds">"</span>qian<span class="pl-pds">"</span></span>, Age: <span class="pl-c1">26</span>},
	}
	sort.<span class="pl-c1">Sort</span>(h)

	fmt.<span class="pl-c1">Println</span>(h)
}</pre></div>
<pre><code>[{chen 24} {zhao 24} {qian 26}]
</code></pre>
<h3>
<a id="user-content-æ€ä¹ˆå®ç°é€†å‘æ’åº" class="anchor" href="#%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E9%80%86%E5%90%91%E6%8E%92%E5%BA%8F" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ€ä¹ˆå®ç°é€†å‘æ’åº</h3>
<h4>
<a id="user-content-sort-é€†å‘æ’åº" class="anchor" href="#sort-%E9%80%86%E5%90%91%E6%8E%92%E5%BA%8F" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>sort é€†å‘æ’åº</h4>
<p>è¿™ä¸ªå‡½æ•°æ”¯æŒè¾“å…¥ä¸€å¹¶è¿”å›ä¸€ä¸ª``æ¥å£ï¼Œä½†æ˜¯è¿”å›çš„é‚£ä¸ªçš„æ¥å£çš„æ–¹æ³•è¢«ä¿®æ”¹äº†</p>
<div class="highlight highlight-source-go"><pre><span class="pl-k">func</span> <span class="pl-en">Reverse</span>(<span class="pl-v">data</span> <span class="pl-v">Interface</span>) <span class="pl-v">Interface</span> {
	<span class="pl-k">return</span> &amp;reverse{data}
}</pre></div>
<div class="highlight highlight-source-go"><pre><span class="pl-k">type</span> reverse <span class="pl-k">struct</span> {
	<span class="pl-v">Interface</span>
}</pre></div>
<p>åœ¨sorté‡Œé¢ï¼Œå®šä¹‰äº†è¿™æ ·ä¸€ä¸ªæœªå¯¼å‡ºçš„æ¥å£<code>reverse</code>ï¼Œä»–ä½¿ç”¨äº†ä¸€ä¸ª <strong>é‡è¦çš„æ¦‚å¿µï¼šç»„åˆ</strong> ï¼Œä»–æœ¬èº«å¹¶æ²¡æœ‰å£°æ˜ä»»ä½•æ–¹æ³•ï¼Œä½†æ˜¯å‘¢ï¼Œä»–å†…åµŒäº†ä¸€ä¸ª<code>Interface</code>æ¥å£ï¼Œæ‰€ä»¥ä»–å°±è‡ªåŠ¨å£°æ˜äº†<code>Interface</code>æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼ï¼</p>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ åœ¨ä½ çš„ä»£ç é‡Œé¢å¯¹ä¸€ä¸ªæ•°æ®ç±»å‹å®ç°äº†<code>Interface</code>æ¥å£ï¼Œé‚£ä¹ˆå®é™…ä¸Šï¼Œä½ ä¹Ÿéšå¼åœ°å®ç°äº†æœªå¯¼å‡ºçš„æ¥å£<code>reverse</code>æ¥å£ã€‚</p>
<p>æ›´ä¸ºç¥å¥‡çš„æ˜¯ï¼šä»–åœ¨ä½ å®ç°äº†è¿™äº›æ¥å£ä¹‹åï¼Œæ”¹å˜äº†ä½ æ‰€å®šä¹‰çš„æ„ä¹‰ã€‚</p>
<p>çœ‹ä¸€çœ‹sorté‡Œçš„å®ç°ï¼š</p>
<div class="highlight highlight-source-go"><pre><span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">r</span> <span class="pl-v">reverse</span>) <span class="pl-en">Less</span></span>(<span class="pl-v">i</span>, <span class="pl-v">j</span> <span class="pl-v">int</span>) <span class="pl-v">bool</span> {
	<span class="pl-k">return</span> r.<span class="pl-smi">Interface</span>.<span class="pl-c1">Less</span>(j, i)
}</pre></div>
<p>å“ˆå“ˆå“ˆ<g-emoji alias="grin" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f601.png" ios-version="6.0">ğŸ˜</g-emoji>ï¼ŒLessåè¿‡æ¥äº†</p>
<p>ä½¿ç”¨ï¼š</p>
<div class="highlight highlight-source-go"><pre><span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-smi">h</span> <span class="pl-k">:=</span> Human{
		Person{Name: <span class="pl-s"><span class="pl-pds">"</span>chen<span class="pl-pds">"</span></span>, Age: <span class="pl-c1">24</span>},
		Person{Name: <span class="pl-s"><span class="pl-pds">"</span>zhao<span class="pl-pds">"</span></span>, Age: <span class="pl-c1">24</span>},
		Person{Name: <span class="pl-s"><span class="pl-pds">"</span>qian<span class="pl-pds">"</span></span>, Age: <span class="pl-c1">26</span>},
	}
	<span class="pl-c"><span class="pl-c">//</span>sort.Sort(h)</span>
	sort.<span class="pl-c1">Sort</span>(sort.<span class="pl-c1">Reverse</span>(h))
	fmt.<span class="pl-c1">Println</span>(h)
}</pre></div>


<script src="http://blog.chyroc.cn/assets/javascript/anchor-js/anchor.min.js"></script>
<script>anchors.add();</script>

<div id="disqus_thread"></div>
<script>
(function () { 
var d = document, s = d.createElement('script')
s.src = 'https://chyroc.disqus.com/embed.js'
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s)
})()
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
Disqus.</a></noscript>
<script id="dsq-count-scr" src="//chyroc.disqus.com/count.js" async></script>

</div>

</body>
</html>
